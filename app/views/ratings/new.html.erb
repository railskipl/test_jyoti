<%= javascript_include_tag "/assets/jquery.js" %>
<%= javascript_include_tag "highcharts.js", "exporting.js" %>
<h5>Rate yourself</h5>

<div id="container1" style="min-width: 310px; max-width: 800px; height: 460px; margin: 0 auto"></div>

<div id="container" style="min-width: 310px; max-width: 800px; height: 550px; margin: 0 auto"></div>
<%= render 'form' %>
<script type='text/javascript'>//<![CDATA[ 
jQuery.noConflict();
jQuery(function () {
        jQuery('#container').highcharts({
            chart: {
                type: 'bar'
            },
            title: {
                text: 'Ratings Comparison'
            },
            
            xAxis: {
                categories: ['Overall Impression', 'Trustworthy', 'Kind and Helpful', 'Has Ability/Potential', 'Performs Well','Persuasive and Presentable', 'Emotionally Mature','Friendly and Social'],
                title: {
                    text: null
                }
            },
            yAxis: {
                min: 0,
                title: {
                    text: 'Ratings',
                    align: 'high'
                },
                labels: {
                    overflow: 'justify'
                }
            },
            tooltip: {
                valueSuffix: ' Ratings'
            },
            plotOptions: {
                bar: {
                    dataLabels: {
                        enabled: true
                    }
                }
            },
            legend: {
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'top',
                x: -40,
                y: 100,
                floating: true,
                borderWidth: 1,
                backgroundColor: (Highcharts.theme && Highcharts.theme.legendBackgroundColor || '#FFFFFF'),
                shadow: true
            },  
            credits: {
                enabled: false
            },
            series: [{
                name: 'Self Image',
                data: [<%= raw number_with_precision(@a[8] , :precision => 1) %>, <%=raw @ratingss[0].trustworthy%>, <%=raw @ratingss[0].kind_helpful%>, <%=raw @ratingss[0].potential%>, <%=raw @ratingss[0].perform_well%>, <%=raw @ratingss[0].presentable%>, <%=raw @ratingss[0].emotianally_mature%>, <%=raw @ratingss[0].friendly_social%>]
            }, {
                name: 'All Mirrors',
                data: [<%= raw number_with_precision(@a[0] , :precision => 1) %>, <%= raw @a[1] %>, <%= raw @a[2] %>, <%= raw @a[3] %>,<%= raw @a[4] %>, <%= raw @a[5] %>, <%= raw @a[6] %>, <%= raw @a[7] %>]
            }, {
                name: 'Power Mirrors',
                data: [5, 4, 6, 3, 8, 4, 9]
            }]
        });

        
        jQuery('#container1').highcharts({
            chart: {
                type: 'bar'
            },
            title: {
                text: 'Your Ratings from all Mirrors'
            },
            
            xAxis: {
                categories: ['Overall Impression', 'Trustworthy', 'Kind and Helpful', 'Has Ability/Potential', 'Performs Well','Persuasive and Presentable', 'Emotionally Mature','Friendly and Social'],
                title: {
                    text: null
                }
            },
            yAxis: {
                min: 0,
                title: {
                    text: 'Ratings',
                    align: 'high'
                },
                labels: {
                    overflow: 'justify'
                }
            },
            tooltip: {
                valueSuffix: ' Ratings'
            },
            plotOptions: {
                bar: {
                    dataLabels: {
                        enabled: true
                    }
                }
            },
            legend: {
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'top',
                x: -40,
                y: 100,
                floating: true,
                borderWidth: 1,
                backgroundColor: (Highcharts.theme && Highcharts.theme.legendBackgroundColor || '#FFFFFF'),
                shadow: true
            },  
            credits: {
                enabled: false
            },
            series: [{
                name: 'All Mirrors',
                data: [9, 6, 5, 8, 7, 2, 1, 4]
            }]
        });
    });
    

//]]>  

</script>